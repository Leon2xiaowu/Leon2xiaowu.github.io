<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CentOS_7éƒ¨ç½²NginxæœåŠ¡ | æ™®é€šç¨‹åºå‘˜çš„åšå®¢</title>
<link rel="shortcut icon" href="https://Leon2xiaowu.github.io/favicon.ico?v=1566101577789">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://Leon2xiaowu.github.io/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://Leon2xiaowu.github.io">
  <img class="avatar" src="https://Leon2xiaowu.github.io/images/avatar.png?v=1566101577789" alt="">
  </a>
  <h1 class="site-title">
    æ™®é€šç¨‹åºå‘˜çš„åšå®¢
  </h1>
  <p class="site-description">
    Do not, for one repulse, forgo the purpose that you resolved to effort.
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>


        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              CentOS_7éƒ¨ç½²NginxæœåŠ¡
            </h2>
            <div class="post-info">
              <time class="post-time">
                Â· 2018-06-03 Â·
              </time>
              
                <a href="https://Leon2xiaowu.github.io/tag/FDqyQV81Y" class="post-tag">
                  # Nginx
                </a>
              
                <a href="https://Leon2xiaowu.github.io/tag/mCdQTi3jJ" class="post-tag">
                  # CentOS7
                </a>
              
            </div>
            
              <div class="post-feature-image" style="background-image: url('https://Leon2xiaowu.github.io/post-images/centos_7-bu-shu-nginx-fu-wu.jpg')">
              </div>
            
            <div class="post-content">
              <p>æ²¡å®Œæ•´çš„å»ºè¿‡ç«™ï¼Œäºæ˜¯æŠŠé—²ç½®çš„æ¬ç“¦å·¥ç”¨èµ·æ¥ã€‚</p>
<h2 id="å®‰è£…nginx">å®‰è£…Nginx</h2>
<p>ç”¨ç»ˆç«¯è¿æ¥VPS
<code>ssh root@ip_address -p port</code>
æ¢æˆå¯¹åº”çš„ipåœ°å€å’Œç«¯å£ï¼Œè¾“å…¥æ­£ç¡®å¯†ç åå°±æˆåŠŸè¿æ¥ã€‚</p>
<p><code>yum install nginx</code> å®‰è£…nginxå¤±è´¥ï¼Œæç¤ºï¼šæ²¡æœ‰å¯ç”¨è½¯ä»¶åŒ… nginx</p>
<p>æºé‡Œæ²¡æœ‰é‚£å°±ç›´æ¥ä»å®˜ç½‘ä¸‹å¥½äº†</p>
<p><code>rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</code></p>
<p>å†å®‰è£…å°±æˆåŠŸäº†ã€‚</p>
<h2 id="å¯åŠ¨nginx">å¯åŠ¨Nginx</h2>
<p><code>systemctl start nginx</code></p>
<p>å¦‚æœå¯åŠ¨æˆåŠŸå°±å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®IPåœ°å€çœ‹åˆ°å–œé—»ä¹è§çš„ <strong>Welcome to nginx!</strong></p>
<h2 id="opensslç”Ÿæˆcsræ–‡ä»¶ç”³è¯·sslè¯ä¹¦">OpenSSLç”ŸæˆCSRæ–‡ä»¶ç”³è¯·SSLè¯ä¹¦</h2>
<p>DogDaddyä¸Šæ³¨å†Œäº†ä¸€ä¸ª<code>.app</code>çš„åŸŸåï¼Œè¿˜é€äº†ä¸€å¹´è¯ä¹¦ï¼Œä¹Ÿæ­£å¥½ç”¨èµ·æ¥ã€‚</p>
<p><code>openssl req -new -nodes -sha256 -newkey rsa:2048 -keyout myprivate.key -out mydomain.csr</code></p>
<p>new: ç”Ÿæˆä¸€ä¸ªæ–°çš„CSR
nodes: ç§é’¥æ–‡ä»¶ä¸è¢«åŠ å¯†
sha256: æ‘˜è¦ç®—æ³•
keyout: ç”Ÿæˆç§é’¥,
newkey rsa:2048: æŒ‡å®šç§é’¥ç±»å‹å’Œé•¿
mydomain.csr: æœ€åç”Ÿæˆçš„æ–‡ä»¶å</p>
<p>æ‰§è¡Œä¸Šé¢å‘½ä»¤åä¼šè¦æ±‚è¾“å…¥ä»¥ä¸‹å†…å®¹</p>
<table>
<thead>
<tr>
<th>å†…å®¹</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>Country Name</td>
<td>å›½å®¶ä»£ç </td>
<td>CN</td>
</tr>
<tr>
<td>State or Province Name</td>
<td>çœä»½</td>
<td>Beijing</td>
</tr>
<tr>
<td>Locality Name</td>
<td>åŸå¸‚</td>
<td>Beijing</td>
</tr>
<tr>
<td>Organization Name</td>
<td>ç»„ç»‡åç§°</td>
<td></td>
</tr>
<tr>
<td>Organization Unit Name</td>
<td>éƒ¨é—¨åç§°</td>
<td>IT</td>
</tr>
<tr>
<td>Common Name</td>
<td>è¯ä¹¦ç”³è¯·åŸŸå</td>
<td>example.app</td>
</tr>
<tr>
<td>A challenge password</td>
<td>æŸä¸ªå¯†ç </td>
<td>å¯ä¸å¡«</td>
</tr>
<tr>
<td>Email Address</td>
<td>é‚®ä»¶</td>
<td>æˆ‘æ²¡å¡«</td>
</tr>
</tbody>
</table>
<p>æœ€ååœ¨å‘½ä»¤æ‰€åœ¨ç›®å½•ä¼šç”Ÿæˆä¸€ä¸ª<code>myprivate.key</code> å’Œä¸€ä¸ª <code>mydomain.csr</code>ï¼Œåˆ†åˆ«ä¸ºç§é’¥å’ŒCSRç”³è¯·æ–‡ä»¶ã€‚</p>
<p>ğŸ¶çˆ¹æ·»åŠ è¯ä¹¦çš„æ—¶å€™å°±æŠŠCSRæ–‡ä»¶é‡Œçš„å†…å®¹æ‹·è¿›å»ï¼Œç”³è¯·ä¸€ä¸‹å°±ç­‰ç€é‚®ä»¶é€šçŸ¥ç­¾å‘è¯ä¹¦ã€‚</p>
<h2 id="å®‰è£…è¯ä¹¦">å®‰è£…è¯ä¹¦</h2>
<p><a href="https://www.secureserver.net/help/article/27192?prog_id=504762">NGINX on CentOS 7: Install a Certificate</a></p>
<h3 id="é€šè¿‡scpæ‹·è´æ–‡ä»¶è‡³vps">é€šè¿‡scpæ‹·è´æ–‡ä»¶è‡³vps</h3>
<p>åŸºæœ¬æ ¼å¼ä¸ºï¼šscp -P [ç«¯å£å·] [æºæ–‡ä»¶è·¯å¾„] root@ip_address:[ç›®æ ‡è·¯å¾„]</p>
<p><strong>-Pä¸€å®šè¦å¤§å†™ï¼</strong> é»˜è®¤ç«¯å£å¯çœç•¥ -P [ç«¯å£å·]</p>
<h3 id="ä¹Œé¾™">ä¹Œé¾™</h3>
<p>å› ä¸ºæˆ‘æ³¨å†Œäº†ä¸ª<code>.app</code>åç¼€çš„åŸŸåï¼Œè¯ä¹¦ä¸‹è½½ä¸‹æ¥æ˜¯<code>domain.app</code>è¢«Macè¯†åˆ«æˆAPPäº†ï¼Œè¦æ˜¾ç¤ºåŒ…å†…å®¹æ‰èƒ½çœ‹åˆ°é‡Œé¢ä¸¤ä¸ª<code>.crt</code>æ–‡ä»¶ã€‚</p>
<h3 id="ç¼–è¾‘é…ç½®æ–‡ä»¶">ç¼–è¾‘é…ç½®æ–‡ä»¶</h3>
<pre><code class="language-bash">[root@host /]# nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
</code></pre>
<p><code>/etc/nginx/nginx.conf</code>å°±æ˜¯é…ç½®æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</p>
<pre><code class="language-yaml">http {
    server {
            listen 80;
            server_name coolexample.com;
            return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;

        server_name coolexample.com;
        ssl_certificate     /etc/nginx/ssl/coolexample.crt;
        ssl_certificate_key /etc/nginx/ssl/coolexample.key;

        root /usr/share/nginx/coolexample.com/;
        index index.php  index.html index.htm;

    }
}
</code></pre>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥å¯¹åº”çš„é…ç½®~</p>
<p><code>root</code>æ˜¯å¯¹åº”ç«™ç‚¹çš„è·Ÿç›®å½•ï¼Œèµ·åˆæ²¡å†™ã€‚å¯¼è‡´ä½¿ç”¨httpsè®¿é—®ä¼š404</p>
<p><code>sudo service nginx restart</code>é‡å¯æœåŠ¡ååº”è¯¥å¯ä»¥ç”Ÿæ•ˆäº†ï¼Œå¦‚æœé‡å¯å¤±è´¥å¯ä»¥é€šè¿‡<code>nginx -t</code>æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é—®é¢˜</p>
<p>æ„‰æ‚¦~</p>

            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://Leon2xiaowu.github.io/post/h5-shi-xian-tu-pian-zhong-ying-wen-fan-yi">
              <h3 class="post-title">
                H5å®ç°å›¾ç‰‡ä¸­è‹±æ–‡ç¿»è¯‘
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://Leon2xiaowu.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
