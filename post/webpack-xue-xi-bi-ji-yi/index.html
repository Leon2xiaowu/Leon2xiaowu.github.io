<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Webpackå­¦ä¹ ç¬”è®°ä¸€ | æ™®é€šç¨‹åºå‘˜çš„åšå®¢</title>
<link rel="shortcut icon" href="https://Leon2xiaowu.github.io/favicon.ico?v=1566101577789">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://Leon2xiaowu.github.io/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://Leon2xiaowu.github.io">
  <img class="avatar" src="https://Leon2xiaowu.github.io/images/avatar.png?v=1566101577789" alt="">
  </a>
  <h1 class="site-title">
    æ™®é€šç¨‹åºå‘˜çš„åšå®¢
  </h1>
  <p class="site-description">
    Do not, for one repulse, forgo the purpose that you resolved to effort.
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>


        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Webpackå­¦ä¹ ç¬”è®°ä¸€
            </h2>
            <div class="post-info">
              <time class="post-time">
                Â· 2017-02-13 Â·
              </time>
              
                <a href="https://Leon2xiaowu.github.io/tag/9IfyZcgbR" class="post-tag">
                  # Webpack
                </a>
              
                <a href="https://Leon2xiaowu.github.io/tag/JHRU9zkub" class="post-tag">
                  # Javascript
                </a>
              
            </div>
            
              <div class="post-feature-image" style="background-image: url('https://Leon2xiaowu.github.io/post-images/webpack-xue-xi-bi-ji-yi.jpg')">
              </div>
            
            <div class="post-content">
              <blockquote>
<p>æŒ‰ç…§webpack-demosçš„é¡ºåºè¿›è¡Œäº†å­¦ä¹ ï¼Œç»“åˆè‡ªå·±çš„ç†è§£ç®€å•çš„ç¿»è¯‘äº†ä¸€ä¸‹ï¼Œé£Ÿç”¨åŸrepositoryæ›´ä½³,<a href="https://github.com/ruanyf/webpack-demos">ç‚¹æˆ‘çœ‹åŸrepo,ç»™ä½œè€…ä¸ªstar</a></p>
</blockquote>
<hr>
<h3 id="what-is-webpack">What is Webpack</h3>
<p>Webpackæ˜¯ä¸€ä¸ªå‰ç«¯æ‰“åŒ…å·¥å…·ï¼Œèƒ½å¤Ÿå°†æ¨¡å—å’Œä¾èµ–è¿›è¡Œæ•´åˆè¾“å‡ºã€‚</p>
<p>Webpackçš„é…ç½®æ–‡ä»¶æ˜¯webpack.config.js</p>
<pre><code class="language-javascript">module.exports = {
  entry: &quot;entryFileUrl&quot;,
  output: {
    filename: &quot;outputFileUrl&quot;
  }
  //.....
}
</code></pre>
<p>å½“ä½ æ¸¸äº†é…ç½®æ–‡ä»¶åï¼Œå°±å¯ä»¥ä½¿ç”¨webpackå‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œä¸€äº›åŸºæœ¬çš„å‘½ä»¤è¡ŒæŒ‡ä»¤æ˜¯ä½ éœ€è¦çŸ¥é“</p>
<ul>
<li>webpack  åœ¨å¼€å‘ç¯å¢ƒä¸‹æ‰§è¡Œä¸€æ¬¡ç¼–è¯‘</li>
<li>webpack -p  åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ‰§è¡Œä¸€æ¬¡ç¼–è¯‘ï¼Œå¯¹æºç è¿›è¡Œå‹ç¼©æ··æ·†</li>
<li>webpack --watch  å¯¹ç¨‹åºè¿›è¡Œç›‘å¬å¹¶æŒç»­æ‰“åŒ…ç¼–è¯‘</li>
<li>webpack -d  æ‰“åŒ…æ—¶ç”Ÿæˆmapæ˜ å°„æ–‡ä»¶</li>
<li>webpack --colors  æ›´ç¾è§‚ï¼Ÿ</li>
</ul>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨package.jsoné…ç½®æ–‡ä»¶ä¸­çš„â€œscriptsâ€è¿›è¡Œé…ç½®</p>
<pre><code class="language-json">  &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;webpack-dev-server&quot;,
    &quot;deploy&quot;: &quot;NODE_ENV=production webpack -p&quot;
  },
</code></pre>
<h3 id="entry-file-and-build">Entry file and build</h3>
<p>entryå‘Šè¯‰webpackæ ¹æ®å“ªä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…ï¼Œoutputåˆ™è¡¨ç¤ºæ‰“åŒ…ç¼–è¯‘åè¾“å‡ºæ–‡ä»¶çš„ç›®å½•ï¼Œfor example</p>
<pre><code class="language-javascript"> module.exports = {
   entry: &quot;./main.js&quot;,
   output: {
     filename: &quot;build.js&quot;
   }
 }
</code></pre>
<p>main.jså°±æ˜¯entry fileï¼Œbuild.jså°±æ˜¯ç»è¿‡æ‰“åŒ…åè¾“å‡ºçš„æ–‡ä»¶ã€‚</p>
<h3 id="å¤šå…¥å£æ–‡ä»¶">å¤šå…¥å£æ–‡ä»¶</h3>
<p>Webpackå…è®¸å¤šå…¥å£æ–‡ä»¶çš„é…ç½®ï¼Œè¿™å¯ä»¥ç”¨äºå¤šé¡µé¢åº”ç”¨ä¸­ã€‚
example</p>
<pre><code class="language-javascript">  module.exports = {
    entry: {
      &quot;build1&quot;: './main1.js',
      &quot;build2&quot;: './main2.js'
    },
    output: {
      filename: '[name].js'
    }
  }
</code></pre>
<p>entryç”±å­—ç¬¦ä¸²å˜æˆå¯¹è±¡ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ [ç¼–è¯‘åçš„æ–‡ä»¶å]:[å…¥å£æ–‡ä»¶Url]ç»„æˆçš„é”®å€¼å¯¹ï¼›
outputç”±æŒ‡å®šçš„æ–‡ä»¶åå˜æˆ[name].jsï¼Œæ ¹æ®entryæŒ‡å®šçš„nameæ¥æ‰“åŒ…ç¼–è¯‘ã€‚</p>
<h3 id="loaders">Loaders</h3>
<p>Loadersä¹Ÿå«åŠ è½½å™¨ï¼Œå®ƒèƒ½å¤Ÿä¸ºä½ çš„åº”ç”¨å¯¹æºæ–‡ä»¶åšè¿›ä¸€æ­¥çš„å¤„ç†ã€‚</p>
<h4 id="babel-loader">Babel-loader</h4>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼Œ<a href="https://github.com/babel/babel-loader">Babel-loader</a>èƒ½å¤Ÿå°†JSX/Es6è½¬æ¢æˆæµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„jsæ–‡ä»¶ã€‚</p>
<pre><code class="language-javascript">  module.exports = {
    entry: &quot;./main.js&quot;,
    output: {
      filename: &quot;build.js&quot;
    },
    module: {
      Loaders: [
        // ===BabelåŠ è½½å™¨===begin
        {
          test: /\.js$/,
          exclude: /(node_modules|bower_components)/,
          loader: 'babel-loader',
          query: {
            presets: ['es2015']
          }
        }
        //===end
      ]
    }
  }
</code></pre>
<h4 id="css-loader">Css-loader</h4>
<p>åœ¨jsä¸­æœ‰æ—¶éœ€è¦åŠ è½½cssæ ·å¼è¡¨æ–‡ä»¶ï¼ŒCss-loaderå¯ä»¥èƒœä»»è¿™é¡¹å·¥ä½œã€‚</p>
<pre><code class="language-javascript">module.exports = {
  entry: './main.js',
  output: {
    filename: 'bundle.js'
  },
  module: {
    loaders:[
      { test: /\.css$/, loader: 'style-loader!css-loader' },
    ]
  }
};
</code></pre>
<h4 id="image-loader">Image-loader</h4>
<p>åœ¨jsä¸­å¼•ç”¨imgæ–‡ä»¶</p>
<pre><code class="language-javascript">//..çœç•¥å…¶ä»–éƒ¨åˆ†
loaders:[
  { test: /\.(png|jpg)$/, loader: 'url-loader?limit=8192' }
]
</code></pre>
<p>url-loaderä¼šå°†å›¾ç‰‡è¿›è¡Œè½¬æ¢ï¼Œå¦‚æœå›¾ç‰‡å°äº8192bytesï¼Œå°†ä¼šè½¬æ¢æˆBase64çš„Data URLï¼›åè¿‡æ¥ï¼Œå°±è½¬æ¢æˆæ­£å¸¸çš„è·¯å¾„ã€‚
å‡è®¾æœ‰ä¸¤å¼ ä¸€å¤§ä¸€å°çš„å›¾ç‰‡ï¼Œç¬¬ä¸€å¼ å°äº8192bytesï¼Œç¬¬äºŒå¼ åˆ™å¤§äºã€‚é‚£ä¹ˆä¸¤è€…ä¼šè¢«æ¢æˆè¿™æ ·ï¼š</p>
<pre><code class="language-html">&lt;!-- å°å›¾è½¬æ¢æˆBase64 --&gt;
&lt;img src=&quot;data:image/png;base64,iVBOR...uQmCC&quot;&gt;  
&lt;img src=&quot;4853ca667a2b8b8844eb2693ac1b2578.png&quot;&gt;
</code></pre>
<h4 id="css-module">Css Module</h4>
<p>css-loader?modules èƒ½å¤Ÿå¼€å¯åŠ è½½çš„Cssæ¨¡å—ä¸­çš„å±æ€§çš„ä½œç”¨åŸŸã€‚
ä¹Ÿå°±æ˜¯è¯´ä½ å¯¼å…¥çš„cssæ¨¡å—ä¸­çš„å±æ€§é»˜è®¤æ˜¯æœ¬åœ°çš„ã€å±€éƒ¨çš„ï¼Œä½ èƒ½é€‰æ‹©ä½¿ç”¨:global(...)å°†é€‰æ‹©å™¨æå‡ä¸ºå…¨å±€ã€‚<a href="https://css-modules.github.io/webpack-demo/">è¯¦ç»†</a>
index.heml</p>
<pre><code class="language-html">&lt;html&gt;
&lt;body&gt;
  &lt;h1 class=&quot;h1&quot;&gt;Hello World&lt;/h1&gt;
  &lt;h2 class=&quot;h2&quot;&gt;Hello Webpack&lt;/h2&gt;
  &lt;div id=&quot;example&quot;&gt;&lt;/div&gt;
  &lt;script src=&quot;./bundle.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>app.css</p>
<pre><code class="language-css">.h1 {
  color:red;
}

:global(.h2) {
  color: blue;
}
</code></pre>
<p>main.JSX</p>
<pre><code class="language-javascript">var React = require('react');
var ReactDOM = require('react-dom');
var style = require('./app.css');

ReactDOM.render(
  &lt;div&gt;
    &lt;h1 className={style.h1}&gt;Hello World&lt;/h1&gt;
    &lt;h2 className=&quot;h2&quot;&gt;Hello Webpack&lt;/h2&gt;
  &lt;/div&gt;,
  document.getElementById('example')
);
</code></pre>
<p>webpack.config.js</p>
<pre><code class="language-javascript">module.exports = {
  entry: './main.jsx',
  output: {
    filename: 'bundle.js'
  },
  module: {
    loaders:[
      {
        test: /\.js[x]?$/,
        exclude: /node_modules/,
        loader: 'babel-loader',
        query: {
          presets: ['es2015', 'react']
        }
      },
      {
        test: /\.css$/,
        loader: 'style-loader!css-loader?modules'  //æ³¨æ„âš ï¸ ?modules
      }
    ]
  }
};
</code></pre>
<p>ç¬¬ä¸€ä¸ªh1ä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ï¼Œå› ä¸ºæ²¡æœ‰å®šä¹‰å…¨å±€çš„.h1é€‰æ‹©å™¨ï¼›
ç¬¬äºŒä¸ªh1ä¸ºçº¢è‰²ï¼Œç”±äº.h1çš„ä½œç”¨èŒƒå›´ä¸ºæœ¬åœ°ï¼Œæ‰€ä»¥style.h1èƒ½å¤Ÿæ­£ç¡®æ‰¾åˆ°é€‰æ‹©å™¨ï¼›
h2å‡ä¸ºè“è‰²ï¼Œå…¶æ˜¯é€šè¿‡:global(.h2){...}å®šä¹‰çš„é€‰æ‹©å™¨ï¼Œæ‰€ä»¥ä½œç”¨èŒƒå›´ä¸ºå…¨éƒ¨ã€‚
{%asset_img css-module.png è¿è¡Œç»“æœ%}</p>
<h3 id="plugin">Plugin</h3>
<h4 id="uglifyjs-plugin">UglifyJs Plugin</h4>
<p>Webpack æœ‰å®ƒè‡ªå·±çš„æ’ä»¶ç”¨æ¥æ‰©å±•æ–¹æ³•ã€‚æ¯”å¦‚<a href="http://webpack.github.io/docs/list-of-plugins.html#uglifyjsplugin">UglifyJs plugin</a>ä¼šæœ€å°åŒ–çš„è¾“å‡ºç¼–è¯‘è¿‡åçš„js</p>
<pre><code class="language-javascript">var webpack = require('webpack');
var uglifyJsPlugin = webpack.optimize.UglifyJsPlugin;
module.exports = {
  entry: './main.js',
  output: {
    filename: 'bundle.js'
  },
  plugins: [
    new uglifyJsPlugin({
      compress: {
        warnings: false
      }
    })
  ]
};
</code></pre>
<p>æ‰“åŒ…ç¼–è¯‘åï¼Œbundle.jsä¼šè¢«æœ€å°åŒ–è¾“å‡ºã€‚ç±»ä¼¼äº</p>
<pre><code class="language-javascript">var o=&quot;Hello&quot;;o+=&quot; World&quot;,document.write(&quot;&lt;h1&gt;&quot;+o+&quot;&lt;/h1&gt;&quot;)
</code></pre>
<h4 id="html-webpack-plugin-and-open-browser-webpack-plugin">HTML Webpack Plugin and Open Browser Webpack Plugin</h4>
<p>webpackè¿˜å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ’ä»¶ã€‚
HTML Webpack Plugin èƒ½å¤Ÿä¸ºä½ è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªindex.htmlï¼Œ
Open Browser Webpack Pluginèƒ½å¤Ÿåœ¨webpackæœåŠ¡è¿è¡Œçš„æ—¶å€™æ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨æ ‡ç­¾å¹¶è½½å…¥é¡µé¢</p>
<pre><code class="language-javascript">var HtmlwebpackPlugin = require('html-webpack-plugin');
var OpenBrowserPlugin = require('open-browser-webpack-plugin');

module.exports = {
  entry: './main.js',
  output: {
    filename: 'bundle.js'
  },
  plugins: [
    new HtmlwebpackPlugin({
      title: &quot;webpack-demo&quot;,
      filename: &quot;index.html&quot;
    }),
    new OpenBrowserPlugin({
      url: &quot;http://localhost:8080&quot;
    })
  ]
};
</code></pre>
<p>è¿è¡Œwebpack-dev-saveï¼Œç°åœ¨ä½ ä¸éœ€è¦è‡ªå·±åˆ›å»ºindex.htmlå’Œæ‰“å¼€æµè§ˆå™¨äº†ã€‚ğŸ‘</p>
<h4 id="environment-flags">Environment flags</h4>
<p>ä½ è¿˜èƒ½åˆ©ç”¨ç¯å¢ƒæ ‡å¿—ï¼Œè®©éƒ¨åˆ†ä»£ç åªèƒ½è¿è¡Œåœ¨å¼€å‘ç¯å¢ƒä¸­
main.js</p>
<pre><code class="language-javascript">document.write('&lt;h1&gt;Environment flags&lt;/h1&gt;')
if (__DEV__){
  document.write(new Date());
}
</code></pre>
<p>webpack.config.js</p>
<pre><code class="language-javascript">var webpack = require('webpack');

var devFlagPlugin = new webpack.DefinePlugin({
  __DEV__: JSON.stringify(JSON.parse(process.env.DEBUG || 'false'))
});

module.exports = {
  entry: './main.js',
  output: {
    filename: 'bundle.js'
  },
  plugins: [devFlagPlugin]
};
</code></pre>
<p>ç°åœ¨è¿è¡Œwebpack</p>
<pre><code># Linux $ Mac
$ env DEBUG=true webpack-dev-server

# Windows
$ set DEBUG=true
$ webpack-dev-server
</code></pre>
<p>{%asset_img environment.png è¿è¡Œç»“æœ%}</p>
<h3 id="code-splitting">Code splitting</h3>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå°†æ‰€æœ‰çš„ä»£ç æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æ˜¯æå…¶æ²¡æœ‰æ•ˆç‡çš„ä¸€ä»¶äº‹ä»¶ã€‚webpackå…è®¸å°†å…¶åˆ†å‰²æˆè®¸å¤šä¸åŒçš„å—ï¼Œå¹¶æŒ‰ç…§éœ€æ±‚è¿›è¡ŒåŠ è½½ã€‚
é¦–å…ˆï¼Œç”¨require.ensureå®šä¹‰ä¸€ä¸ªåˆ†å‰²ç‚¹</p>
<pre><code class="language-javascript">require.ensure(['./a'],function(require){
  vat content  = require('./a')
  document.open()
  document.write('&lt;h1&gt;Environment flags&lt;/h1&gt;')
  document.colors()
})
</code></pre>
<p>require.ensure å‘Šè¯‰webpack &quot;a.js&quot;åº”è¯¥è¢«åˆ†å¼€åŠ è½½å¹¶æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶ã€‚
å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<a href="https://www.npmjs.com/package/bundle-loader">bundle-loader</a></p>
<pre><code class="language-javascript">// main.js

// Now a.js is requested, it will be bundled into another file
var load = require('bundle-loader!./a.js');

// To wait until a.js is available (and get the exports)
//  you need to async wait for it.
load(function(file) {
  document.open();
  document.write('&lt;h1&gt;' + file + '&lt;/h1&gt;');
  document.close();
});
</code></pre>

            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://Leon2xiaowu.github.io/post/mian-xiang-dui-xiang-de-cheng-xu-she-ji-javascript-ji-cheng">
              <h3 class="post-title">
                JavaScripté¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡-Javascriptç»§æ‰¿
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://Leon2xiaowu.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
